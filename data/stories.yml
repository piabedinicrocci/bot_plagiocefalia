version: "3.1"

stories:
# ---------------------------------------------------
# VISITO ESPECIALISTA Y NO TIENE OS
# ---------------------------------------------------
- story: visito_especialista_y_no_tiene_os
  steps:
  - intent: inicio
  - action: utter_inicio
  - action: utter_pregunta_nombre_responsable
  - intent: nombre_responsable
    entities:
    - nombre: belen
  - slot_was_set:
    - nombre: belen
  - action: action_guardar_nombre_responsable #visito especialista?
  - intent: afirmacion
  - action: action_visito_especialista
  - slot_was_set:
    - visito_especialista: true
  - intent: nombre_neurocirujano
    entities:
    - nombre_n: mariana brey
  - slot_was_set:
    - nombre_n: mariana brey
  - action: action_guardar_nombre_neurocirujano #adjunta fotos documentos
    # - intent: fotos
  - action: utter_rta_fotos
  # arranca flujo alternativo nombre bebe, gestacion, fecha nac
  - action: utter_pregunta_nombre_bebe
  - intent: nombre_bebe
    entities:
    - nombre_b: ximena elgart
  - slot_was_set:
    - nombre_b: ximena elgart
  - action: action_guardar_nombre_bebe #semanas gestacion?
  - intent: semanas_gestacion
    entities:
    - semanas_gestacion: '39'
  - slot_was_set:
    - semanas_gestacion: '39'
  - action: utter_pregunta_fecha_nacimiento
  - intent: fecha_nacimiento
    entities:
    - fecha_nacimiento
  # termina flujo alternativo nombre bebe, gestacion, fecha nac
  - action: utter_pregunta_os
  - intent: negacion
  - action: action_tiene_os
  - slot_was_set:
    - tiene_os: false
  # adjunta foto dni
  # derive el chat al Usuario de Luz Hortal

# ---------------------------------------------------
# VISITO ESPECIALISTA Y TIENE OS
# ---------------------------------------------------
- story: visito_especialista_y_tiene_obra_social
  steps:
  - intent: inicio
  - action: utter_inicio
  - action: utter_pregunta_nombre_responsable
  - intent: nombre_responsable
    entities:
    - nombre
  - action: action_guardar_nombre_responsable #visito especialista?
  - intent: afirmacion
  - action: action_visito_especialista
  - intent: nombre_neurocirujano
    entities:
    - nombre_n: mariana brey
  - action: action_guardar_nombre_neurocirujano #adjunta fotos documentos
  # - intent: fotos
  - action: utter_rta_fotos
  # arranca flujo alternativo nombre bebe, gestacion, fecha nac
  - action: utter_pregunta_nombre_bebe
  - intent: nombre_bebe
    entities:
    - nombre_b
  - action: action_guardar_nombre_bebe #semanas gestacion?
  - intent: semanas_gestacion
    entities:
    - semanas_gestacion: '39'
  - action: utter_pregunta_fecha_nacimiento
  - intent: fecha_nacimiento
    entities:
    - fecha_nacimiento
  # termina flujo alternativo nombre bebe, gestacion, fecha nac
  - action: utter_pregunta_os
  - intent: afirmacion
  - action: action_tiene_os
  # adjunta foto os
  - action: utter_foto_dni
  # adjunta foto dni
  # derive el chat al Usuario de Luz Hortal

# ---------------------------------------------------
# NO VISITO ESPECIALISTA Y NO RESIDE EN AMBA
# ---------------------------------------------------
- story: no_visito_especialista_y_no_reside_AMBA
  steps:
  - intent: inicio
  - action: utter_inicio
  - action: utter_pregunta_nombre_responsable
  - intent: nombre_responsable
    entities:
    - nombre
  - action: action_guardar_nombre_responsable #visito especialista?
  - intent: negacion
  - action: action_visito_especialista #reside amba?
  - intent: negacion
  - action: utter_no_reside_amba
  #- action: action_finalizar_comunicacion

# ---------------------------------------------------
# NO VISITO ESPECIALISTA Y RESIDE EN AMBA
# ---------------------------------------------------
- story: no_visito_especialista_y_reside_AMBA
  steps:
  - intent: inicio
  - action: utter_inicio
  - action: utter_pregunta_nombre_responsable
  - intent: nombre_responsable
    entities:
    - nombre
  - action: action_guardar_nombre_responsable #visito especialista?
  - intent: negacion
  - action: action_visito_especialista #reside amba?
  - intent: afirmacion
  - action: utter_meses_bebe
  - intent: edad_bebe
    entities:
    - mes_bebe: '1'
  - action: action_edad_bebe
  # arranca flujo alternativo nombre bebe, gestacion, fecha nac
  - action: utter_pregunta_nombre_bebe
  - intent: nombre_bebe
    entities:
    - nombre_b
  - action: action_guardar_nombre_bebe #semanas gestacion?
  - intent: semanas_gestacion
    entities:
    - semanas_gestacion: '39'
  - action: utter_pregunta_fecha_nacimiento
  - intent: fecha_nacimiento
    entities:
    - fecha_nacimiento
  # termina flujo alternativo nombre bebe, gestacion, fecha nac
  # crear paciente y agendar turno en Odoo
  - action: action_mostrar_turnos
  - intent: opcion_turno
    entities:
    - opcion
  - action: action_confirmacion_turno
