version: "3.1"

intents:
  - inicio
  - fin
  - afirmacion
  - negacion
  - nombre_responsable
  - nombre_neurocirujano
  - edad_bebe
  - nombre_bebe
  - semanas_gestacion
  - fecha_nacimiento

entities:
  - nombre
  - visito_especialista
  - nombre_n
  - mes_bebe
  - nombre_b
  - semanas_gestacion
  - dia
  - mes
  - anio
  - tiene_os

actions:
  - action_visito_especialista
  - action_finalizar_comunicacion
  - action_edad_bebe
  - action_tiene_os

slots:
  nombre:
    type: text
    mappings:
      - type: from_entity
        entity: nombre
  visito_especialista:
    type: bool
    initial_value: False
    mappings:
      - type: custom
  nombre_n:
    type: text
    mappings:
      - type: from_entity
        entity: nombre_n
  mes_bebe:
    type: float
    mappings:
      - type: from_entity
        entity: mes_bebe
  nombre_b:
    type: text
    mappings:
      - type: from_entity
        entity: nombre_b
  semanas_gestacion:
    type: float
    mappings:
      - type: from_entity
        entity: semanas_gestacion
  dia:
    type: float
    min_value: 1
    max_value: 31
    mappings:
      - type: from_entity
        entity: dia
  mes:
    type: float
    min_value: 1
    max_value: 12
    mappings:
      - type: from_entity
        entity: mes
  anio:
    type: float
    min_value: 2021
    max_value: 2023
    mappings:
      - type: from_entity
        entity: anio
  tiene_os:
    type: bool
    initial_value: False
    mappings:
      - type: custom

responses:
  utter_inicio:
  - text: "¡Hola! 🤗
          \nSoy Plagio Bot de Plagiocefalia Argentina. y hoy estaré para asistirte. 
          \nEn nuestra clínica atendemos las asimetrías craneales posturales en todas sus fases en bebés hasta los 18 meses.
          \nTe dejo dos videos para que conozcas sobre Plagiocefalia!
          \n⏯️  https://youtu.be/XzTgTgPC7Xw
          \n⏯️  https://youtu.be/Oh0TF_ze-hI"

  utter_pregunta_nombre_responsable:
  - text: "¿Como te llamas?"
  - text: "¿Como es tu nombre?"

  utter_pregunta_especialista_visitado:
  - text: "Bienvenid@ {nombre}!​ ¿Ya has visitado un especialista craneal?"

  utter_bifurcacion_especialista_visitado:
    - condition:
        - type: slot
          name: visito_especialista
          value: false
      text: "Entiendo. ¿Y residis en el AMBA?"
    - text: "Entiendo. ¿Con que neurocirujano te atendiste?"

  utter_fotos_orden:
  - text: "Bien! Ahora adjunta foto de la misma. Aguardamos la foto de cada uno de los documentos emitidos😊"

  utter_no_reside_amba:
  - text: "Solamente atendemos presencial en el AMBA, por lo que si se te dificulta acercarte envianos tu audio explicando tu situación y un operador te atenderá a la brevedad"

  utter_meses_bebe:
  - text: "Y decime, cuantos meses tiene tu bebe?"

  utter_pregunta_nombre_bebe:
  - text: "El nombre completo de tu bebe: "

  utter_pregunta_semanas_gestacion:
  - text: "Que lindo nombre! Y cuantas semanas de gestacion tuviste?"

  utter_pregunta_fecha_nacimiento:
  - text: "Okey. Ahora decime la fecha de nacimiento de {nombre_b}. Usa el formato dd/mm/aa"

  utter_rta_fotos:
  - text: "¡Perfecto! Para poder derivarte al sector de presupuesto y coordinación de turno para la toma de molde, vamos a solicitarle los siguientes datos:"

  utter_pregunta_os:
  - text: "Tienes obra social?"

  utter_foto_dni:
  - text: "Y ahora te pido que nos adjuntes foto de frente y dorso de tu DNI"

  utter_derivacion:
  - text: "Ya te derivé al sector correspondiente. En el transcurso del día se estarán contactando con vos!☺️"

  utter_confirmacion_turno:
  - text: "Ya te derivé al sector correspondiente. En el transcurso del día se estarán contactando con vos!☺️"

  utter_fin:
  - text: "Hasta luego {nombre}!​👋​ Cualquier consulta estamos para ayudarte"

  #FALLBACK
  utter_desconocido:
  - text: "No entendi, porfa repetime lo que quisiste decir o enviame un audio"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
